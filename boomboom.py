
import requests, re, time

def do():
	respArray = []
	for url in urlArray:
			start = time.time()
			try:
				print(url)
				respArray.append(requests.get(url,timeout=.1).status_code)
				end = time.time()

			except requests.exceptions.ConnectionError:
				respArray.append(0)
			except requests.exceptions.ReadTimeout:
				respArray.append(0)
			except requests.exceptions.InvalidSchema:
				respArray.append(0)
			if (end-start == .1):
				continue
def getURLS():
	uniList = open('UniList.txt','r')
	stringText = uniList.read()
	uniList.close()
	urlArray = stringText.split(" ")
	urlArray[0]='http://www.acu.edu/'
	urlArray[len(urlArray)-1] = 'http://www.ysu.edu/'
	pattern = re.compile("([(^\')])(.*/)")
	for i in range(1,len(urlArray)-2):
		urlArray[i] = pattern.match(urlArray[i]).group(2)
	return urlArray


urlArray = getURLS()
totalURLS = float(len(urlArray))
respArray = [200, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 0, 200, 200, 0, 0, 0, 0, 200, 200, 0, 0, 0, 200, 0, 0, 0, 200, 0, 200, 0, 200, 0, 403, 0, 200, 0, 0, 403, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0, 403, 0, 200, 0, 200, 0, 200, 0, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0, 0, 200, 0, 403, 0, 0, 0, 0, 200, 0, 0, 200, 200, 403, 0, 200, 200, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 200, 200, 0, 200, 200, 200, 0, 0, 0, 0, 200, 0, 200, 0, 200, 200, 0, 0, 0, 0, 200, 0, 200, 200, 0, 0, 0, 0, 0, 403, 200, 0, 200, 0, 0, 200, 0, 0, 403, 200, 0, 0, 0, 404, 0, 0, 0, 200, 0, 0, 200, 0, 200, 0, 403, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 200, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 200, 200, 0, 200, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 404, 0, 403, 0, 0, 200, 0, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0, 200, 0, 0, 0, 0, 0, 0, 200, 0, 0, 200, 0, 0, 0, 0, 0, 200, 200, 403, 0, 200, 0, 0, 0, 0, 200, 200, 0, 0, 0, 0, 200, 0, 0, 200, 0, 0, 0, 0, 0, 0, 403, 0, 0, 200, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 403, 200, 0, 200, 0, 200, 0, 200, 200, 200, 0, 0, 403, 0, 0, 200, 0, 0, 200, 200, 0, 200, 0, 200, 200, 0, 200, 0, 0, 0, 200, 0, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 200, 200, 0, 0, 200, 200, 0, 200, 200, 200, 0, 0, 0, 0, 0, 0, 0, 200, 200, 0, 0, 200, 0, 200, 0, 0, 200, 0, 0, 200, 403, 200, 0, 0, 200, 0, 0, 0, 0, 0, 200, 200, 0, 200, 0, 0, 0, 0, 200, 0, 0, 200, 200, 0, 0, 0, 200, 200, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 200, 0, 0, 0, 0, 0, 0, 200, 0, 0, 200, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0, 200, 0, 200, 0, 0, 0, 0, 0, 0, 403, 0, 0, 200, 0, 0, 0, 0, 0, 200, 200, 0, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 200, 0, 0, 0, 0, 0, 0, 0, 200, 200, 0, 200, 0, 0, 200, 0, 0, 0, 0, 0, 200, 0, 200, 0, 0, 0, 200, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 403, 0, 0, 0, 0, 200, 0, 0, 403, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 200, 0, 200, 0, 0, 0, 0, 0, 403, 0, 200, 200, 0, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 0, 200, 0, 200, 403, 0, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0, 200, 0, 0, 0, 200, 0, 0, 200, 200, 200, 0, 0, 200, 0, 200, 200, 403, 0, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 200, 200, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 0, 403, 0, 403, 0, 0, 0, 200, 0, 0, 0, 0, 200, 200, 0, 200, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 200, 200, 0, 0, 0, 200, 0, 200, 200, 200, 0, 200, 200, 200, 0, 0, 0, 0, 0, 200, 0, 200, 0, 200, 0, 0, 0, 200, 0, 0, 200, 200, 0, 200, 0, 0, 0, 0, 0, 200, 0, 0, 0, 200, 0, 0, 0, 200, 200, 0, 200, 0, 200, 0, 200, 200, 0, 200, 200, 200, 0, 200, 200, 0, 200, 0, 200, 0, 200, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 200, 0, 200, 0, 0, 0, 0, 200, 0, 200, 200, 200, 0, 200, 0, 200, 0, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0, 200, 200, 0, 0, 0, 0, 0, 200, 200, 0, 0, 200, 0, 0, 0, 0, 0, 200, 200, 200, 200, 0, 200, 0, 0, 0, 200, 200, 200, 0, 0, 0, 0, 0, 0, 0, 200, 403, 200, 0, 200, 0, 0, 403, 0, 200, 0, 0, 0, 200, 0, 0, 0, 0, 0, 200, 200, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0, 0, 200, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 200, 0, 200, 0, 0, 200, 200, 403, 200, 0, 0, 200, 0, 0, 0, 200, 0, 0, 200, 200, 0, 0, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 500, 0, 0, 200, 0, 0, 0, 0, 200, 0, 0, 0, 200, 200, 200, 200, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 0, 200, 0, 0, 0, 0, 0, 200, 0, 0, 0, 200, 0, 0, 404, 0, 0, 200, 0, 0, 200, 200, 0, 200, 0, 0, 0, 0, 0, 0, 200, 403, 0, 0, 200, 0, 0, 0, 200, 0, 200, 0, 0]
index200 = []
count=0

for i in range(0,len(respArray)-1):
	if (respArray[i]==200):
		print('bing')
		count+=1
		index200.append(i)

print(count)
count = float(count)

print(index200)

print("The percentage of university/college URLS that responded succedfully to my get request was {} ".format(count/totalURLS))

succeses = []

for i in index200:
	succeses.append(urlArray[i])

print(succeses)

htmlARRAY = []



count = 0

for url in succeses:
	start = time.time()
	try:
		print(url)
		print(count)
		htmlARRAY.append((requests.get(url,timeout=.1).text,count))
		count+=1
		end = time.time()
	except requests.exceptions.ConnectionError:
		respArray.append(0)
	except requests.exceptions.ReadTimeout:
		respArray.append(0)
	except requests.exceptions.InvalidSchema:
		respArray.append(0)
	if (end-start == 2):
		continue

print(len(htmlARRAY))


file = open("bigarray.txt","w")
file.write(str(htmlARRAY))
file.close()


